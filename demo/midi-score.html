<html lang="zh-cn">

<head>
  <meta charset="UTF-8">
  <title>MIDI files testing - Gemt Score Testbed</title>
  <!-- Utilities -->
  <script type="text/javascript" src="js/midi-demo.js"> </script>
  <script type="text/javascript" src="js/pageutils.js"> </script>
  <!-- Play code -->
  <script src="js/inc/jasmid/stream.js"></script>
  <script src="js/inc/jasmid/midifile.js"></script>
  <script src="js/inc/jasmid/replayer.js"></script>
  <script type="text/javascript" src="js/inc/Base64binary.js"> </script>
  <script type="text/javascript" src="js/inc/MIDI.min.js"> </script>

  <!-- - ->
    <script type="text/javascript" src="../build/gemt-min.js"> </script>
    <!- - -->
  <script type="text/javascript" src="../build/gemt.js"> </script>
  <!-- -->
  <script type="text/javascript" src="../svg/pic-svg.js"> </script>
  <script type="text/javascript" src="../src/impl/gemt-implement.js"> </script>
  <!-- -->
  <!-- -->
</head>

<body>
  <center id="content"> </center>
  <div id="catalog"> </div>
  <script type="text/javascript">
    var option = new EOption();
    option.use()
      //.set("lengthOfRow", 500)
      .set("marginTitle", 60)
      .set("indentHeading", 60)
      .set("pageRender", function(ctx, p) {
        var tile = Mozaik;

        tile.onload = function() {
          var imgWidth = tile.img.width;
          var imgHeight = tile.img.height;
          for (var i = 0; i <= Container.clientWidth / imgWidth; i++) {
            for (var j = 0; j <= Container.clientHeight / imgHeight; j++) {
              Mozaik.draw(ctx, i * imgWidth, j * imgHeight);
            }
          }
          gct.print();
        }
        tile.draw(ctx, 0, 0);
      })
      .set("titleRender", makeTitleRenderCanvas(400, filelist[fileIndex]));


    addScorePanel(800, 800);
    var Container = document.getElementById("myCanvas");
    ctx = Container.getContext("2d");
    ctx.scale(2, 2);
    ctx.save();
    MIDIDemoInit();
  </script>
</body>

</html>
